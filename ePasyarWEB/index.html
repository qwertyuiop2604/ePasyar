<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-...">

</head>
<body>

    <div class="login-container">
        <h1>ePasyar</h1>
        <form id="login-form">
            <div id="vigan">Welcome, KaiVigan!</div>
            <label for="email">Email</label>
            <input type="text" id="email" name="email" required>
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required minlength="8" required> 
            <div id="forgotPass" onclick="redirectToForgotPassword()">
                <p>Forgot Password</p>
            </div>
            <button id="btnLogin" onclick="redirectToDash()">Login</button>
        </form>

        <form id="forgot-password-form" style="display: none;">
            <div id="forgot">Forgot Password</div>
            <label for="forgot-email">Email</label>
            <input type="text" id="forgot-email" name="forgot-email" required>
            <label for="new-password">New Password</label>
            <input type="password" id="new-password" name="new-password" required>
            <label for="confirm-password">Confirm Password</label>
            <input type="password" id="confirm-password" name="confirm-password" required>
            <button type="submit">Reset Password</button>
            <button type="button" onclick="hideForgotPasswordForm()">Cancel</button>
        </form>
    </div>
    <div id="register">
        <p>Not registered? <a id="register-button" href="register.html">Create an Account</a></p>
    </div>

    <script>
       function redirectToDash() {
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;

    if (email.trim() !== '' && password.trim() !== '') {
        window.location.href = 'dash.html?email=' + email + '&password=' + password;
    } else {
        alert('Please enter both email and password.');
    }
}

        function redirectToForgotPassword() {
            window.location.href = 'forgot_password.html';
        }

        function redirectToDash() {
            window.location.href = 'dash.html';
        }

        function hideForgotPasswordForm() {
            document.getElementById('forgot-password-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
        }

        document.getElementById("forgot").addEventListener("click", function() {
            window.location.href = "forgot_password.html";
        });
    </script>
<script src="../src/index.js"></script>

<script type="module">
    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
    import { getFirestore, setDoc, addDoc, doc } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA6U1In2wlItYioP3yl43C3hCgiXUZ4oKI",
      authDomain: "epasyar-aa569.firebaseapp.com",
      databaseURL: "https://epasyar-aa569-default-rtdb.firebaseio.com",
      projectId: "epasyar-aa569",
      storageBucket: "epasyar-aa569.appspot.com",
      messagingSenderId: "1004550371893",
      appId: "1:1004550371893:web:92e4f4e03c1d8be1980f7c"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    btnLogin.addEventListener('click', (e) => {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;


        updateDoc(doc(db, "Login", '1xzwioBLh3icY1smQ1eJ'), {
        email: email,
        password:password
        });
        alert('Login updated');
    });
    
  </script>
</body>
</html>
